<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blue Note — diegoromero.blog</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Serif+4:ital,opsz,wght@0,8..60,300;0,8..60,400;0,8..60,600;1,8..60,300;1,8..60,400&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      /* ── CSS Custom Properties ── */
      :root {
        --bg: #fff8e7;
        --fg: #1b2838;
        --accent: #c4a35a;
        --accent2: #4a90d9;
        --surface: #f0ead6;
        --muted: #7a7060;
        --border: #d4c9a8;
        --nav-h: 56px;
        --transition: 0.3s ease;
      }
      [data-theme="dark"] {
        --bg: #1b2838;
        --fg: #fff8e7;
        --accent: #c4a35a;
        --accent2: #4a90d9;
        --surface: #243446;
        --muted: #9a8e78;
        --border: #344556;
      }

      /* ── Reset & Base ── */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: "Source Serif 4", Georgia, serif;
        background: var(--bg);
        color: var(--fg);
        font-size: 16px;
        line-height: 1.7;
        transition:
          background var(--transition),
          color var(--transition);
        min-height: 100vh;
        padding-top: var(--nav-h);
        padding-bottom: calc(var(--nav-h) + 8px);
      }

      /* ── Top Nav ── */
      #top-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: var(--nav-h);
        background: var(--bg);
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 24px;
        z-index: 100;
        transition:
          background var(--transition),
          border-color var(--transition);
      }
      .nav-logo {
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        text-decoration: none;
      }
      .logo-mark {
        width: 36px;
        height: 36px;
        background: var(--fg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        transition: background var(--transition);
      }
      .logo-mark::after {
        content: "";
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--accent);
        bottom: 4px;
        right: 4px;
      }
      .logo-mark span {
        font-family: "Bebas Neue", sans-serif;
        font-size: 16px;
        color: var(--bg);
        letter-spacing: 0.05em;
        line-height: 1;
      }
      .logo-text {
        font-family: "Bebas Neue", sans-serif;
        font-size: 18px;
        letter-spacing: 0.12em;
        color: var(--fg);
        transition: color var(--transition);
      }
      .nav-right {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      #theme-toggle {
        background: none;
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 6px 14px;
        cursor: pointer;
        font-family: "Bebas Neue", sans-serif;
        font-size: 13px;
        letter-spacing: 0.1em;
        color: var(--fg);
        background: var(--surface);
        transition: all var(--transition);
      }
      #theme-toggle:hover {
        border-color: var(--accent);
        color: var(--accent);
      }

      /* ── Gold Line Sweep ── */
      #gold-sweep {
        position: fixed;
        top: var(--nav-h);
        left: 0;
        width: 0;
        height: 2px;
        background: var(--accent);
        z-index: 99;
        transition: width 0.7s cubic-bezier(0.4, 0, 0.2, 1);
      }
      #gold-sweep.swept {
        width: 100%;
      }

      /* ── Bottom Nav ── */
      #bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: var(--nav-h);
        background: var(--fg);
        display: flex;
        align-items: stretch;
        z-index: 100;
        transition: background var(--transition);
      }
      .bnav-btn {
        flex: 1;
        background: none;
        border: none;
        border-top: 2px solid transparent;
        color: var(--bg);
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.12em;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 4px 2px;
        transition: all 0.2s ease;
        position: relative;
        opacity: 0.65;
      }
      .bnav-btn .bnav-icon {
        font-size: 16px;
        line-height: 1;
      }
      .bnav-btn.active {
        opacity: 1;
        border-top-color: var(--accent);
        color: var(--accent);
      }
      .bnav-btn:hover {
        opacity: 1;
      }

      /* ── Views ── */
      .view {
        display: none;
      }
      .view.active {
        display: block;
      }

      /* ── Page Transition ── */
      .view.active {
        animation: viewIn 0.35s ease-out;
      }
      @keyframes viewIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ── Container ── */
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 24px;
      }
      .container--wide {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 24px;
      }

      /* ══════════════════════════════════
       HOME VIEW
    ══════════════════════════════════ */
      #view-home {
        overflow-x: hidden;
      }

      .home-hero {
        position: relative;
        padding: 60px 24px 40px;
        max-width: 900px;
        margin: 0 auto;
        min-height: 380px;
      }
      .catalogue-number {
        font-family: "Bebas Neue", sans-serif;
        font-size: 13px;
        letter-spacing: 0.25em;
        color: var(--muted);
        margin-bottom: 24px;
        display: block;
      }
      .hero-title-wrap {
        position: relative;
        display: inline-block;
        margin-bottom: 8px;
      }
      .hero-blue-rect {
        position: absolute;
        left: -12px;
        top: 8px;
        width: 60%;
        height: 72%;
        background: var(--accent2);
        opacity: 0.18;
        z-index: 0;
        transition: background var(--transition);
      }
      .hero-title {
        font-family: "Bebas Neue", sans-serif;
        font-size: clamp(72px, 14vw, 140px);
        line-height: 0.9;
        letter-spacing: 0.02em;
        color: var(--fg);
        position: relative;
        z-index: 1;
        animation: heroUp 0.6s ease-out both;
      }
      @keyframes heroUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .hero-subtitle-row {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-top: 24px;
        animation: heroUp 0.6s 0.15s ease-out both;
      }
      .hero-gold-line {
        flex: 1;
        max-width: 120px;
        height: 2px;
        background: var(--accent);
        transform-origin: left;
        animation: lineIn 0.8s 0.5s ease-out both;
      }
      @keyframes lineIn {
        from {
          transform: scaleX(0);
        }
        to {
          transform: scaleX(1);
        }
      }
      .hero-subtitle {
        font-family: "Source Serif 4", serif;
        font-size: 17px;
        color: var(--muted);
        font-style: italic;
        font-weight: 300;
      }
      .hero-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 28px;
        animation: heroUp 0.6s 0.25s ease-out both;
      }
      .hero-tag {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.15em;
        padding: 5px 14px;
        border: 1px solid var(--accent);
        color: var(--accent);
        border-radius: 2px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .hero-tag:hover {
        background: var(--accent);
        color: var(--bg);
      }

      /* Featured Cards */
      .featured-section {
        padding: 48px 24px 40px;
        max-width: 900px;
        margin: 0 auto;
      }
      .section-label {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.3em;
        color: var(--muted);
        margin-bottom: 24px;
        display: flex;
        align-items: center;
        gap: 16px;
      }
      .section-label::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--border);
      }
      .featured-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }
      @media (min-width: 640px) {
        .featured-grid {
          grid-template-columns: 2fr 1fr;
          grid-template-rows: auto auto;
        }
        .card-featured {
          grid-row: span 2;
        }
      }

      .card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 3px;
        padding: 28px;
        cursor: pointer;
        transition: all 0.25s ease;
        position: relative;
        overflow: hidden;
      }
      .card:hover {
        transform: translateY(-4px);
        border-color: var(--accent);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      }
      .card-featured {
        padding: 0;
        overflow: hidden;
      }
      .card-featured-swatch {
        height: 140px;
        background: var(--accent2);
        position: relative;
        overflow: hidden;
      }
      .card-featured-swatch::before {
        content: "";
        position: absolute;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.08);
        top: -60px;
        right: -40px;
      }
      .card-featured-swatch-label {
        font-family: "Bebas Neue", sans-serif;
        font-size: 80px;
        color: rgba(255, 255, 255, 0.12);
        position: absolute;
        bottom: -10px;
        left: 16px;
        line-height: 1;
        letter-spacing: 0.02em;
      }
      .card-featured-body {
        padding: 24px;
      }
      .card-tag {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.2em;
        color: var(--accent);
        margin-bottom: 8px;
        display: block;
      }
      .card-title {
        font-family: "Source Serif 4", serif;
        font-size: 20px;
        font-weight: 600;
        line-height: 1.3;
        color: var(--fg);
        margin-bottom: 10px;
      }
      .card-featured .card-title {
        font-size: 24px;
      }
      .card-excerpt {
        font-size: 14px;
        color: var(--muted);
        line-height: 1.6;
        margin-bottom: 16px;
      }
      .card-meta {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.1em;
        color: var(--muted);
      }

      /* ══════════════════════════════════
       BLOG VIEW
    ══════════════════════════════════ */
      #view-blog {
        padding: 40px 0 24px;
      }
      .blog-header {
        max-width: 900px;
        margin: 0 auto 40px;
        padding: 0 24px;
      }
      .page-title {
        font-family: "Bebas Neue", sans-serif;
        font-size: clamp(48px, 9vw, 80px);
        letter-spacing: 0.04em;
        line-height: 1;
        margin-bottom: 12px;
      }
      .page-subtitle {
        font-size: 16px;
        color: var(--muted);
        font-style: italic;
      }
      .gold-divider {
        width: 60px;
        height: 2px;
        background: var(--accent);
        margin: 16px 0;
      }

      /* Tag filters */
      .tag-filters {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 32px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
        padding: 0 24px;
      }
      .tag-filter {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.15em;
        padding: 5px 14px;
        border: 1px solid var(--border);
        color: var(--muted);
        border-radius: 2px;
        cursor: pointer;
        background: none;
        transition: all 0.2s ease;
      }
      .tag-filter:hover,
      .tag-filter.active {
        border-color: var(--accent);
        color: var(--accent);
        background: transparent;
      }

      /* Blog rows */
      .blog-list {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 24px;
      }
      .blog-row {
        display: grid;
        grid-template-columns: 70px 1fr;
        gap: 16px 24px;
        padding: 20px 0;
        border-bottom: 1px solid var(--border);
        cursor: pointer;
        transition: all 0.2s ease;
        align-items: start;
      }
      .blog-row:hover .blog-row-title {
        color: var(--accent);
      }
      .blog-row-date {
        font-family: "Bebas Neue", sans-serif;
        font-size: 13px;
        letter-spacing: 0.05em;
        color: var(--muted);
        line-height: 1.3;
        text-align: right;
        padding-top: 3px;
      }
      .blog-row-date .date-day {
        font-size: 28px;
        display: block;
        line-height: 1;
        color: var(--accent);
      }
      .blog-row-content {
      }
      .blog-row-tag {
        font-family: "Bebas Neue", sans-serif;
        font-size: 10px;
        letter-spacing: 0.2em;
        color: var(--accent2);
        margin-bottom: 4px;
        display: block;
      }
      .blog-row-title {
        font-family: "Source Serif 4", serif;
        font-size: 18px;
        font-weight: 600;
        color: var(--fg);
        line-height: 1.35;
        transition: color 0.2s ease;
        margin-bottom: 6px;
      }
      .blog-row-excerpt {
        font-size: 14px;
        color: var(--muted);
        line-height: 1.5;
      }

      /* ══════════════════════════════════
       ARTICLE VIEW
    ══════════════════════════════════ */
      #view-article {
        padding: 32px 0 40px;
      }
      .article-wrap {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 24px;
        display: grid;
        grid-template-columns: 1fr;
        gap: 40px;
      }
      @media (min-width: 768px) {
        .article-wrap {
          grid-template-columns: 220px 1fr;
          gap: 48px;
        }
      }

      .article-toc {
        position: sticky;
        top: calc(var(--nav-h) + 24px);
        align-self: start;
      }
      .toc-label {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.3em;
        color: var(--muted);
        margin-bottom: 16px;
        display: block;
      }
      .toc-list {
        list-style: none;
        counter-reset: toc;
      }
      .toc-list li {
        counter-increment: toc;
        padding: 8px 0;
        border-bottom: 1px solid var(--border);
      }
      .toc-list li:last-child {
        border-bottom: none;
      }
      .toc-list a {
        text-decoration: none;
        color: var(--muted);
        font-size: 13px;
        font-family: "Source Serif 4", serif;
        display: flex;
        align-items: baseline;
        gap: 10px;
        transition: color 0.2s ease;
      }
      .toc-list a::before {
        content: counter(toc, decimal-leading-zero);
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.1em;
        color: var(--accent);
        flex-shrink: 0;
      }
      .toc-list a:hover,
      .toc-list a.active {
        color: var(--fg);
      }

      .article-main {
        min-width: 0;
      }
      .article-header {
        margin-bottom: 32px;
      }
      .article-label {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.3em;
        color: var(--accent2);
        margin-bottom: 12px;
        display: block;
      }
      .article-title {
        font-family: "Source Serif 4", serif;
        font-size: clamp(28px, 5vw, 42px);
        font-weight: 600;
        line-height: 1.2;
        color: var(--fg);
        margin-bottom: 16px;
      }
      .article-meta {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.12em;
        color: var(--muted);
        display: flex;
        align-items: center;
        gap: 16px;
        flex-wrap: wrap;
      }
      .article-meta-sep {
        color: var(--accent);
      }

      .article-body h2 {
        font-family: "Bebas Neue", sans-serif;
        font-size: 28px;
        letter-spacing: 0.06em;
        color: var(--fg);
        margin: 40px 0 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid var(--accent);
      }
      .article-body p {
        font-size: 17px;
        line-height: 1.8;
        color: var(--fg);
        margin-bottom: 20px;
      }
      .article-body ul,
      .article-body ol {
        padding-left: 24px;
        margin-bottom: 20px;
      }
      .article-body li {
        font-size: 17px;
        line-height: 1.7;
        margin-bottom: 8px;
        color: var(--fg);
      }
      blockquote {
        border-left: 3px solid var(--accent);
        padding: 16px 24px;
        margin: 28px 0;
        background: var(--surface);
        border-radius: 0 3px 3px 0;
      }
      blockquote p {
        font-style: italic;
        font-size: 18px !important;
        line-height: 1.7 !important;
        color: var(--fg) !important;
        margin-bottom: 8px !important;
      }
      blockquote cite {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.15em;
        color: var(--accent);
      }

      pre {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 4px;
        padding: 24px;
        overflow-x: auto;
        margin: 24px 0;
        position: relative;
      }
      pre::before {
        content: "CODE";
        position: absolute;
        top: 10px;
        right: 14px;
        font-family: "Bebas Neue", sans-serif;
        font-size: 10px;
        letter-spacing: 0.2em;
        color: var(--muted);
      }
      code {
        font-family: "Fira Code", monospace;
        font-size: 14px;
        line-height: 1.6;
        color: var(--fg);
      }
      p code {
        background: var(--surface);
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 14px;
        color: var(--accent2);
      }

      /* ══════════════════════════════════
       BOOKS VIEW
    ══════════════════════════════════ */
      #view-books {
        padding: 40px 0 24px;
      }
      .books-header {
        max-width: 900px;
        margin: 0 auto 40px;
        padding: 0 24px;
      }
      .books-grid {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 24px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }
      @media (min-width: 600px) {
        .books-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (min-width: 900px) {
        .books-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }
      .book-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 3px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.25s ease;
      }
      .book-card:hover {
        transform: translateY(-4px);
        border-color: var(--accent);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      }
      .book-swatch {
        height: 130px;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        padding: 12px;
      }
      .book-swatch::before {
        content: "";
        position: absolute;
        inset: 0;
        background: inherit;
      }
      .book-swatch-title {
        font-family: "Bebas Neue", sans-serif;
        font-size: 18px;
        letter-spacing: 0.04em;
        color: rgba(255, 255, 255, 0.95);
        line-height: 1.1;
        position: relative;
        z-index: 1;
      }
      .book-swatch-angled {
        position: absolute;
        bottom: -20px;
        right: -20px;
        width: 100px;
        height: 100px;
        background: rgba(255, 255, 255, 0.08);
        transform: rotate(30deg);
        z-index: 0;
      }
      .book-card-body {
        padding: 14px 16px;
      }
      .book-author {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.15em;
        color: var(--muted);
        margin-bottom: 6px;
        display: block;
      }
      .book-stars {
        color: var(--accent);
        font-size: 13px;
        letter-spacing: 2px;
        margin-bottom: 8px;
      }
      .book-desc {
        font-size: 13px;
        color: var(--muted);
        line-height: 1.5;
      }

      /* ══════════════════════════════════
       BOOK DETAIL VIEW
    ══════════════════════════════════ */
      #view-book-detail {
        padding: 32px 0 40px;
      }
      .book-detail-wrap {
        max-width: 760px;
        margin: 0 auto;
        padding: 0 24px;
      }
      .book-detail-header {
        display: grid;
        grid-template-columns: 1fr;
        gap: 24px;
        margin-bottom: 40px;
      }
      @media (min-width: 580px) {
        .book-detail-header {
          grid-template-columns: 140px 1fr;
          align-items: start;
        }
      }
      .book-cover-block {
        width: 100%;
        max-width: 140px;
        aspect-ratio: 2/3;
        border-radius: 3px;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        padding: 14px;
      }
      .book-cover-title-text {
        font-family: "Bebas Neue", sans-serif;
        font-size: 22px;
        color: rgba(255, 255, 255, 0.95);
        line-height: 1.1;
        position: relative;
        z-index: 1;
      }
      .book-detail-info {
      }
      .book-detail-title {
        font-family: "Source Serif 4", serif;
        font-size: clamp(26px, 5vw, 38px);
        font-weight: 600;
        color: var(--fg);
        line-height: 1.2;
        margin-bottom: 10px;
      }
      .book-detail-author {
        font-family: "Bebas Neue", sans-serif;
        font-size: 13px;
        letter-spacing: 0.2em;
        color: var(--muted);
        margin-bottom: 12px;
        display: block;
      }
      .book-detail-stars {
        font-size: 20px;
        color: var(--accent);
        letter-spacing: 3px;
        margin-bottom: 16px;
      }
      .book-detail-meta {
        font-family: "Bebas Neue", sans-serif;
        font-size: 12px;
        letter-spacing: 0.12em;
        color: var(--muted);
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .book-detail-body h2 {
        font-family: "Bebas Neue", sans-serif;
        font-size: 24px;
        letter-spacing: 0.06em;
        color: var(--fg);
        margin: 36px 0 14px;
        padding-bottom: 6px;
        border-bottom: 2px solid var(--accent);
      }
      .book-detail-body p {
        font-size: 17px;
        line-height: 1.8;
        color: var(--fg);
        margin-bottom: 18px;
      }

      /* ══════════════════════════════════
       PROJECTS VIEW
    ══════════════════════════════════ */
      #view-projects {
        padding: 40px 0 24px;
      }
      .projects-header {
        max-width: 900px;
        margin: 0 auto 40px;
        padding: 0 24px;
      }
      .projects-list {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 24px;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }
      .project-card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 3px;
        padding: 28px 32px;
        position: relative;
        overflow: hidden;
        transition: all 0.25s ease;
        cursor: default;
      }
      .project-card:hover {
        transform: translateY(-4px);
        border-color: var(--accent);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }
      .project-counter {
        font-family: "Bebas Neue", sans-serif;
        font-size: clamp(64px, 10vw, 100px);
        color: var(--border);
        position: absolute;
        top: -8px;
        right: 20px;
        line-height: 1;
        letter-spacing: 0.02em;
        pointer-events: none;
        transition: color var(--transition);
      }
      .project-card:hover .project-counter {
        color: var(--accent);
        opacity: 0.3;
      }
      .project-label {
        font-family: "Bebas Neue", sans-serif;
        font-size: 11px;
        letter-spacing: 0.3em;
        color: var(--accent2);
        margin-bottom: 8px;
        display: block;
      }
      .project-name {
        font-family: "Bebas Neue", sans-serif;
        font-size: 36px;
        letter-spacing: 0.06em;
        color: var(--fg);
        line-height: 1;
        margin-bottom: 12px;
      }
      .project-desc {
        font-size: 16px;
        color: var(--muted);
        line-height: 1.6;
        max-width: 500px;
        margin-bottom: 20px;
      }
      .project-stack {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .stack-tag {
        font-family: "Fira Code", monospace;
        font-size: 12px;
        padding: 3px 10px;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: 2px;
        color: var(--accent2);
        transition: all var(--transition);
      }

      /* ── Utility ── */
      .hidden {
        display: none !important;
      }

      /* ── Scrollbar ── */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: var(--bg);
      }
      ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent);
      }

      /* ── Mobile tweaks ── */
      @media (max-width: 480px) {
        .home-hero {
          padding: 40px 20px 32px;
        }
        .books-grid {
          grid-template-columns: 1fr 1fr;
          gap: 14px;
        }
        .blog-row {
          grid-template-columns: 60px 1fr;
          gap: 12px 16px;
        }
        .blog-row-date .date-day {
          font-size: 22px;
        }
        .article-wrap {
          grid-template-columns: 1fr;
        }
        .article-toc {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Gold sweep line -->
    <div id="gold-sweep"></div>

    <!-- Top Nav -->
    <nav id="top-nav">
      <a class="nav-logo" onclick="switchView('home')" role="button" tabindex="0">
        <div class="logo-mark"><span>DR</span></div>
        <span class="logo-text">diegoromero</span>
      </a>
      <div class="nav-right">
        <button id="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">LIGHT</button>
      </div>
    </nav>

    <!-- Views -->
    <!-- ══ HOME ══ -->
    <section id="view-home" class="view active">
      <div class="home-hero">
        <span class="catalogue-number">DR-001 &nbsp;/&nbsp; PERSONAL BLOG</span>
        <div class="hero-title-wrap">
          <div class="hero-blue-rect"></div>
          <h1 class="hero-title">DIEGO<br />ROMERO</h1>
        </div>
        <div class="hero-subtitle-row">
          <div class="hero-gold-line"></div>
          <p class="hero-subtitle">
            Software engineer. Writing about technology, productivity &amp; books.
          </p>
        </div>
        <div class="hero-tags">
          <span class="hero-tag" onclick="switchView('blog')">TECHNOLOGY</span>
          <span class="hero-tag" onclick="switchView('blog')">PRODUCTIVITY</span>
          <span class="hero-tag" onclick="switchView('books')">BOOKS</span>
          <span class="hero-tag" onclick="switchView('projects')">PROJECTS</span>
        </div>
      </div>

      <div class="featured-section">
        <div class="section-label">RECENT WRITING</div>
        <div class="featured-grid">
          <!-- Large card -->
          <div class="card card-featured" onclick="switchView('article')">
            <div class="card-featured-swatch">
              <span class="card-featured-swatch-label">NEXT</span>
            </div>
            <div class="card-featured-body">
              <span class="card-tag">TECHNOLOGY</span>
              <div class="card-title">Types of Rendering in Next.js</div>
              <p class="card-excerpt">
                A deep dive into SSG, SSR, and ISR — understanding when each strategy serves your
                users best and how to choose wisely.
              </p>
              <div class="card-meta">JAN 2026 &nbsp;·&nbsp; 8 MIN READ</div>
            </div>
          </div>
          <!-- Small cards -->
          <div class="card" onclick="switchView('article')">
            <span class="card-tag">PRODUCTIVITY</span>
            <div class="card-title">On Deep Work and Focused Programming</div>
            <p class="card-excerpt">Cal Newport's principles applied to software development.</p>
            <div class="card-meta">DEC 2025 &nbsp;·&nbsp; 6 MIN</div>
          </div>
          <div class="card" onclick="switchView('article')">
            <span class="card-tag">PRODUCTIVITY</span>
            <div class="card-title">Pomodoro as a Productivity Tool</div>
            <p class="card-excerpt">How I use time-boxing to ship features without burning out.</p>
            <div class="card-meta">NOV 2025 &nbsp;·&nbsp; 5 MIN</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ══ BLOG ══ -->
    <section id="view-blog" class="view">
      <div class="blog-header">
        <h1 class="page-title">WRITING</h1>
        <div class="gold-divider"></div>
        <p class="page-subtitle">
          Essays on software, productivity, and the books that shaped my thinking.
        </p>
      </div>

      <div class="tag-filters">
        <button class="tag-filter active" data-tag="all" onclick="filterPosts(this)">ALL</button>
        <button class="tag-filter" data-tag="technology" onclick="filterPosts(this)">
          TECHNOLOGY
        </button>
        <button class="tag-filter" data-tag="productivity" onclick="filterPosts(this)">
          PRODUCTIVITY
        </button>
        <button class="tag-filter" data-tag="books" onclick="filterPosts(this)">BOOKS</button>
      </div>

      <div class="blog-list">
        <div class="blog-row" data-tag="productivity" onclick="switchView('article')">
          <div class="blog-row-date">
            <span class="date-day">12</span>
            JAN<br />2026
          </div>
          <div class="blog-row-content">
            <span class="blog-row-tag">PRODUCTIVITY</span>
            <div class="blog-row-title">On Deep Work and Focused Programming</div>
            <p class="blog-row-excerpt">
              Cal Newport's principles applied to the craft of writing software — carving out
              deliberate uninterrupted time in a distracted world.
            </p>
          </div>
        </div>

        <div class="blog-row" data-tag="productivity" onclick="switchView('article')">
          <div class="blog-row-date">
            <span class="date-day">05</span>
            NOV<br />2025
          </div>
          <div class="blog-row-content">
            <span class="blog-row-tag">PRODUCTIVITY</span>
            <div class="blog-row-title">Pomodoro as a Productivity Tool</div>
            <p class="blog-row-excerpt">
              How structured 25-minute work intervals changed the way I approach complex engineering
              tasks and reduced decision fatigue.
            </p>
          </div>
        </div>

        <div class="blog-row" data-tag="technology" onclick="switchView('article')">
          <div class="blog-row-date">
            <span class="date-day">20</span>
            OCT<br />2025
          </div>
          <div class="blog-row-content">
            <span class="blog-row-tag">TECHNOLOGY</span>
            <div class="blog-row-title">Types of Rendering in Next.js</div>
            <p class="blog-row-excerpt">
              A practical breakdown of Static Generation, Server-Side Rendering, and Incremental
              Static Regeneration — with code examples and decision frameworks.
            </p>
          </div>
        </div>

        <div class="blog-row" data-tag="books" onclick="switchView('article')">
          <div class="blog-row-date">
            <span class="date-day">14</span>
            SEP<br />2025
          </div>
          <div class="blog-row-content">
            <span class="blog-row-tag">BOOKS</span>
            <div class="blog-row-title">The Psychology of Money — My Notes</div>
            <p class="blog-row-excerpt">
              Morgan Housel's 20 flaws, biases, and causes of bad behaviour with money. The most
              underlined book on my shelf.
            </p>
          </div>
        </div>

        <div class="blog-row" data-tag="technology" onclick="switchView('article')">
          <div class="blog-row-date">
            <span class="date-day">02</span>
            AUG<br />2025
          </div>
          <div class="blog-row-content">
            <span class="blog-row-tag">TECHNOLOGY</span>
            <div class="blog-row-title">Rewriting My Blog With Claude Code</div>
            <p class="blog-row-excerpt">
              Using an AI coding assistant to rebuild my personal site from scratch — what worked,
              what surprised me, and what it means for the future of development.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ══ ARTICLE ══ -->
    <section id="view-article" class="view">
      <div class="container">
        <div class="article-wrap">
          <!-- TOC -->
          <aside class="article-toc">
            <span class="toc-label">IN THIS ARTICLE</span>
            <ol class="toc-list">
              <li>
                <a href="#section-1" onclick="scrollToSection('section-1')"
                  >Static Generation — The Default</a
                >
              </li>
              <li>
                <a href="#section-2" onclick="scrollToSection('section-2')"
                  >Server-Side Rendering — When It Matters</a
                >
              </li>
              <li>
                <a href="#section-3" onclick="scrollToSection('section-3')"
                  >Incremental Static Regeneration</a
                >
              </li>
              <li>
                <a href="#section-4" onclick="scrollToSection('section-4')"
                  >Choosing the Right Strategy</a
                >
              </li>
            </ol>
          </aside>

          <!-- Body -->
          <article class="article-main">
            <header class="article-header">
              <span class="article-label">TECHNOLOGY</span>
              <h1 class="article-title">Types of Rendering in Next.js</h1>
              <div class="article-meta">
                <span>OCT 20, 2025</span>
                <span class="article-meta-sep">·</span>
                <span>8 MIN READ</span>
                <span class="article-meta-sep">·</span>
                <span>DIEGO ROMERO</span>
              </div>
              <div class="gold-divider" style="margin-top: 20px"></div>
            </header>

            <div class="article-body">
              <p>
                Next.js ships with three distinct rendering strategies, and understanding when to
                reach for each one is the difference between a fast, scalable application and a
                sluggish one that frustrates both users and developers. After building several
                production apps with Next.js, I've developed clear mental models for each approach.
              </p>

              <h2 id="section-1">Static Generation — The Default</h2>
              <p>
                Static Site Generation (SSG) is Next.js's default and most performant mode. Pages
                are built at compile time, resulting in plain HTML files that can be cached and
                served instantly from a CDN. If your content doesn't change frequently — a blog, a
                marketing site, documentation — SSG is almost always the right choice.
              </p>
              <p>
                The <code>getStaticProps</code> function is the entry point. It runs at build time
                on the server, can call databases or external APIs freely, and its return value
                becomes the component's props. The generated page is then reused for every visitor
                until the next build.
              </p>

              <pre><code>// pages/posts/[slug].js
export async function getStaticProps({ params }) {
  const post = await fetchPostBySlug(params.slug);

  return {
    props: {
      post,
    },
    // Optional: revalidate every 60 seconds (ISR)
    revalidate: 60,
  };
}

export async function getStaticPaths() {
  const posts = await fetchAllPosts();

  return {
    paths: posts.map((p) => ({
      params: { slug: p.slug },
    })),
    // 'blocking' renders unknown paths on-demand
    fallback: 'blocking',
  };
}

export default function PostPage({ post }) {
  return (
    &lt;main&gt;
      &lt;h1&gt;{post.title}&lt;/h1&gt;
      &lt;div dangerouslySetInnerHTML={{ __html: post.content }} /&gt;
    &lt;/main&gt;
  );
}</code></pre>

              <p>
                The key benefit here is predictability. Every user receives an identical,
                pre-rendered HTML document. First-byte time is minimal, and you can layer aggressive
                caching on top.
              </p>

              <h2 id="section-2">Server-Side Rendering — When It Matters</h2>
              <p>
                Server-Side Rendering (SSR) generates a fresh page on every request. The HTML is
                assembled on the server using the current data, then sent to the client. This is the
                right model for pages where the content is personalised, frequently changing, or
                dependent on request-level information like cookies, session tokens, or query
                parameters.
              </p>
              <p>
                The <code>getServerSideProps</code> function provides access to the full request
                context: headers, cookies, query strings. Because it runs on every request, it's
                inherently slower than SSG — you're trading throughput for freshness. Use it
                deliberately.
              </p>

              <blockquote>
                <p>
                  "The performance cost of SSR is not a bug, it's the price of freshness. The
                  question is whether your users are actually paying for something they need."
                </p>
                <cite>— Guillermo Rauch</cite>
              </blockquote>

              <p>
                Common SSR use cases: dashboards displaying user-specific data, e-commerce product
                pages where inventory changes constantly, and any page that must respond to
                authentication state without a client-side loading flash.
              </p>

              <h2 id="section-3">Incremental Static Regeneration</h2>
              <p>
                Incremental Static Regeneration (ISR) is the middle ground — and honestly, it's one
                of the most elegant engineering compromises I've encountered in web development. You
                get the speed of static pages combined with the ability to update them in the
                background without a full rebuild.
              </p>
              <p>
                The mechanism is simple: add a <code>revalidate</code> field to your
                <code>getStaticProps</code> return. After the specified number of seconds, the next
                request triggers a background regeneration. The visiting user still receives the
                cached (stale) page instantly, while the regeneration happens silently. Subsequent
                visitors get the fresh version.
              </p>
              <p>
                This stale-while-revalidate pattern is particularly powerful for content sites with
                hundreds or thousands of pages. A full rebuild is expensive and unnecessary if only
                three posts were updated. ISR lets you surgically freshen only what changed.
              </p>

              <h2 id="section-4">Choosing the Right Strategy</h2>
              <p>
                The decision tree I follow is deliberately simple. Start with SSG — it's fast, it's
                cheap, and it's the correct default for most pages. If the content needs to be
                personalised per user or truly real-time, move to SSR. If you need SSG-level speed
                but can tolerate data that's a few minutes old, use ISR.
              </p>
              <p>
                A single Next.js application can use all three simultaneously. Your
                <code>/about</code> page is pure static. Your <code>/dashboard</code> uses SSR. Your
                blog posts use ISR with a 5-minute revalidation window. The framework doesn't
                enforce a single strategy — it hands you sharp tools and trusts you to choose the
                right one.
              </p>
              <p>
                The best engineers I know treat rendering strategy as a first-class architectural
                decision, not an afterthought. Think about it early, revisit it when your usage
                patterns change, and always measure the impact on real users.
              </p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- ══ BOOKS ══ -->
    <section id="view-books" class="view">
      <div class="books-header">
        <h1 class="page-title">BOOKSHELF</h1>
        <div class="gold-divider"></div>
        <p class="page-subtitle">
          Non-fiction that moved the needle. Honest reviews, no summaries.
        </p>
      </div>

      <div class="books-grid">
        <div class="book-card" onclick="switchView('book-detail')">
          <div
            class="book-swatch"
            style="background: linear-gradient(145deg, #2c3e6b 0%, #4a90d9 100%)"
          >
            <div class="book-swatch-angled"></div>
            <span class="book-swatch-title">DEEP<br />WORK</span>
          </div>
          <div class="book-card-body">
            <span class="book-author">CAL NEWPORT</span>
            <div class="book-stars">★★★★★</div>
            <p class="book-desc">Rules for focused success in a distracted world.</p>
          </div>
        </div>

        <div class="book-card" onclick="switchView('book-detail')">
          <div
            class="book-swatch"
            style="background: linear-gradient(145deg, #5c3d2e 0%, #c4803a 100%)"
          >
            <div class="book-swatch-angled"></div>
            <span class="book-swatch-title">PSYCHOLOGY OF MONEY</span>
          </div>
          <div class="book-card-body">
            <span class="book-author">MORGAN HOUSEL</span>
            <div class="book-stars">★★★★★</div>
            <p class="book-desc">Timeless lessons on wealth, greed, and happiness.</p>
          </div>
        </div>

        <div class="book-card" onclick="switchView('book-detail')">
          <div
            class="book-swatch"
            style="background: linear-gradient(145deg, #2d4a3e 0%, #4a9070 100%)"
          >
            <div class="book-swatch-angled"></div>
            <span class="book-swatch-title">COURAGE TO BE DISLIKED</span>
          </div>
          <div class="book-card-body">
            <span class="book-author">KISHIMI &amp; KOGA</span>
            <div class="book-stars">★★★★★</div>
            <p class="book-desc">Adlerian philosophy as a path to freedom.</p>
          </div>
        </div>

        <div class="book-card" onclick="switchView('book-detail')">
          <div
            class="book-swatch"
            style="background: linear-gradient(145deg, #3d2c2c 0%, #9b4444 100%)"
          >
            <div class="book-swatch-angled"></div>
            <span class="book-swatch-title">SHOE DOG</span>
          </div>
          <div class="book-card-body">
            <span class="book-author">PHIL KNIGHT</span>
            <div class="book-stars">★★★★★</div>
            <p class="book-desc">The memoir of Nike's founder. Raw and honest.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ══ BOOK DETAIL ══ -->
    <section id="view-book-detail" class="view">
      <div class="book-detail-wrap">
        <div class="book-detail-header">
          <div
            class="book-cover-block"
            style="background: linear-gradient(145deg, #2c3e6b 0%, #4a90d9 100%)"
          >
            <div class="book-swatch-angled"></div>
            <span class="book-cover-title-text">DEEP<br />WORK</span>
          </div>
          <div class="book-detail-info">
            <h1 class="book-detail-title">Deep Work</h1>
            <span class="book-detail-author">CAL NEWPORT</span>
            <div class="book-detail-stars">★★★★★</div>
            <div class="book-detail-meta">
              <span>2016</span>
              <span>GRAND CENTRAL</span>
              <span>296 PAGES</span>
            </div>
            <div class="gold-divider" style="margin-top: 20px"></div>
          </div>
        </div>

        <div class="book-detail-body">
          <h2>The Core Argument</h2>
          <p>
            Newport's thesis is deceptively simple: the ability to perform deep work — cognitively
            demanding tasks without distraction — is becoming simultaneously rarer and more valuable
            in our economy. Those who cultivate this ability will thrive. Everyone else will
            struggle to produce work that matters.
          </p>
          <p>
            He divides knowledge workers into two camps: those who produce rare, valuable output
            through concentrated effort, and those trapped in the shallow end — constant email,
            endless meetings, and the performative busyness that feels productive but rarely is. The
            book is a sustained argument for why you must choose the first path, and a practical
            guide for how to get there.
          </p>

          <h2>Why It Hit Hard</h2>
          <p>
            I read Deep Work during a period when I was producing a lot of code but genuinely
            unsatisfied with the quality. I was shipping features, clearing tickets, staying busy —
            but the deep architectural thinking, the elegant abstractions, the real craft of
            software was getting squeezed out by the noise. Newport gave me a vocabulary for what I
            was losing and permission to protect it.
          </p>

          <blockquote>
            <p>
              "If you don't produce, you won't thrive — no matter how skilled or talented you are."
            </p>
            <cite>— Cal Newport, Deep Work</cite>
          </blockquote>

          <p>
            The most striking chapter is the one on attention residue. Every time you switch tasks,
            a cognitive residue from the previous task lingers. Fragments of the last Slack thread
            follow you into the complex function you're trying to write. The cost of
            context-switching is far higher than we intuitively feel, because we only notice the
            interruption, not the slow seeping away of quality that follows.
          </p>

          <h2>What I Actually Changed</h2>
          <p>
            I block the first two hours of every work morning as a deep work session. No Slack, no
            email, no standups scheduled before 10am. That 8–10am window is where the hard thinking
            happens: architecture decisions, difficult debugging, writing. I treat it as a protected
            asset rather than flexible time that meetings can claim.
          </p>
          <p>
            I also started keeping a time-block planner — a simple notebook where I plan my day in
            30-minute blocks before opening my laptop. Newport recommends this as a way to make your
            intentions explicit and force honesty about how much shallow work you're doing. The
            first week was humbling. My "productive" days had only about 90 minutes of real depth.
          </p>

          <h2>Quotes That Stayed With Me</h2>

          <blockquote>
            <p>"A deep life is a good life, any way you look at it."</p>
            <cite>— Cal Newport, Deep Work</cite>
          </blockquote>

          <p>
            That line sounds almost too simple, but it carries real weight. Newport isn't just
            making a productivity argument — he's making a case for a particular kind of human
            flourishing. The ability to go deep, to lose yourself in hard, meaningful work, is one
            of the most reliable sources of satisfaction available to knowledge workers. Protecting
            it isn't just good strategy. It's a quality-of-life decision.
          </p>
          <p>
            Five stars. Required reading for any software engineer who cares about the quality of
            their work and not just the quantity of their output.
          </p>
        </div>
      </div>
    </section>

    <!-- ══ PROJECTS ══ -->
    <section id="view-projects" class="view">
      <div class="projects-header">
        <h1 class="page-title">PROJECTS</h1>
        <div class="gold-divider"></div>
        <p class="page-subtitle">Things I built. Some are alive, some are learning experiences.</p>
      </div>

      <div class="projects-list">
        <div class="project-card">
          <span class="project-counter">01</span>
          <span class="project-label">WEB APP</span>
          <div class="project-name">DEEPFLOW</div>
          <p class="project-desc">
            A focus timer built around deep work principles. Pomodoro intervals with session
            analytics, streak tracking, and distraction logging. Designed to make your concentration
            visible.
          </p>
          <div class="project-stack">
            <span class="stack-tag">React</span>
            <span class="stack-tag">TypeScript</span>
            <span class="stack-tag">Next.js</span>
            <span class="stack-tag">Firebase</span>
          </div>
        </div>

        <div class="project-card">
          <span class="project-counter">02</span>
          <span class="project-label">iOS APP</span>
          <div class="project-name">LISTU</div>
          <p class="project-desc">
            Habit tracker for iOS with a clean, minimal interface. Daily streaks, weekly reviews,
            and gentle notifications. Built for people who hate over-engineered productivity apps.
          </p>
          <div class="project-stack">
            <span class="stack-tag">Swift</span>
            <span class="stack-tag">SwiftUI</span>
          </div>
        </div>

        <div class="project-card">
          <span class="project-counter">03</span>
          <span class="project-label">CLI TOOL</span>
          <div class="project-name">KODR</div>
          <p class="project-desc">
            A command-line tool for scaffolding opinionated project structures. Generates
            boilerplate for React, Next.js, and Node.js projects with sane defaults and zero
            configuration.
          </p>
          <div class="project-stack">
            <span class="stack-tag">Node.js</span>
            <span class="stack-tag">TypeScript</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Bottom Nav -->
    <nav id="bottom-nav">
      <button class="bnav-btn active" data-view="home" onclick="switchView('home')">
        <span class="bnav-icon">⌂</span>
        HOME
      </button>
      <button class="bnav-btn" data-view="blog" onclick="switchView('blog')">
        <span class="bnav-icon">✍</span>
        BLOG
      </button>
      <button class="bnav-btn" data-view="article" onclick="switchView('article')">
        <span class="bnav-icon">◈</span>
        ARTICLE
      </button>
      <button class="bnav-btn" data-view="books" onclick="switchView('books')">
        <span class="bnav-icon">◻</span>
        BOOKS
      </button>
      <button class="bnav-btn" data-view="book-detail" onclick="switchView('book-detail')">
        <span class="bnav-icon">◈</span>
        BOOK
      </button>
      <button class="bnav-btn" data-view="projects" onclick="switchView('projects')">
        <span class="bnav-icon">◇</span>
        PROJECTS
      </button>
    </nav>

    <script>
      // ── State ──
      let currentView = "home"
      let isDark = false

      // ── Switch View ──
      function switchView(viewId) {
        // Deactivate current
        const prev = document.getElementById("view-" + currentView)
        if (prev) prev.classList.remove("active")

        // Activate new
        currentView = viewId
        const next = document.getElementById("view-" + viewId)
        if (next) {
          next.classList.add("active")
          window.scrollTo({ top: 0, behavior: "smooth" })
        }

        // Update bottom nav
        document.querySelectorAll(".bnav-btn").forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.view === viewId)
        })

        // Trigger gold sweep
        triggerSweep()
      }

      // ── Gold Sweep ──
      function triggerSweep() {
        const sweep = document.getElementById("gold-sweep")
        sweep.style.transition = "none"
        sweep.style.width = "0"
        sweep.offsetWidth // reflow
        sweep.style.transition = "width 0.7s cubic-bezier(0.4, 0, 0.2, 1)"
        sweep.style.width = "100%"
      }

      // ── Dark Mode ──
      function toggleTheme() {
        isDark = !isDark
        document.documentElement.setAttribute("data-theme", isDark ? "dark" : "")
        document.getElementById("theme-toggle").textContent = isDark ? "DARK" : "LIGHT"
      }

      // ── Tag Filter ──
      function filterPosts(btn) {
        const tag = btn.dataset.tag

        // Update button states
        document.querySelectorAll(".tag-filter").forEach((b) => b.classList.remove("active"))
        btn.classList.add("active")

        // Show/hide rows
        document.querySelectorAll(".blog-row").forEach((row) => {
          if (tag === "all" || row.dataset.tag === tag) {
            row.classList.remove("hidden")
          } else {
            row.classList.add("hidden")
          }
        })
      }

      // ── Scroll to Section (TOC) ──
      function scrollToSection(id) {
        const el = document.getElementById(id)
        if (!el) return
        const navH = parseInt(
          getComputedStyle(document.documentElement).getPropertyValue("--nav-h")
        )
        const y = el.getBoundingClientRect().top + window.scrollY - navH - 16
        window.scrollTo({ top: y, behavior: "smooth" })
      }

      // ── TOC Scroll Spy ──
      function initScrollSpy() {
        const sections = ["section-1", "section-2", "section-3", "section-4"]
        const links = document.querySelectorAll(".toc-list a")

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                const id = entry.target.id
                links.forEach((link) => {
                  const href = link.getAttribute("href")
                  link.classList.toggle("active", href === "#" + id)
                })
              }
            })
          },
          { rootMargin: "-20% 0px -60% 0px" }
        )

        sections.forEach((id) => {
          const el = document.getElementById(id)
          if (el) observer.observe(el)
        })
      }

      // ── Init ──
      document.addEventListener("DOMContentLoaded", () => {
        // Initial gold sweep on load
        triggerSweep()
        // Init scroll spy
        initScrollSpy()
      })
    </script>
  </body>
</html>
